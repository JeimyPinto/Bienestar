openapi: 3.0.0
info:
  title: Bienestar API
  version: 1.0.0
  description: Documentación de la API para gestión de usuarios

paths:
  /api:
    get:
      summary: Bienvenida a la API de Bienestar
      tags:
        - General
      responses:
        '200':
          description: Mensaje de bienvenida
          content:
            application/json:
              example:
                message: Bienvenido a la API de Bienestar. Este endpoint es solo para pruebas de verificación de conexión a la API.
                environment: development
  /uploads/{filename}:
    get:
      summary: Obtener archivos estáticos subidos
      description: Devuelve un archivo estático previamente subido (por ejemplo, imágenes de usuario).
      tags:
        - Files
      parameters:
        - in: path
          name: filename
          required: true
          schema:
            type: string
          description: Nombre del archivo a recuperar
      responses:
        '200':
          description: Archivo encontrado y devuelto correctamente
        '404':
          description: Archivo no encontrado
  /users:
    get:
      summary: Obtiene todos los usuarios
      tags:
        - Users
      security:
        - bearerAuth: []
      description: Retorna todos los usuarios registrados. Solo accesible para usuarios con rol ADMIN, SUPERADMIN o INSTRUCTOR.
      responses:
        '200':
          description: Lista de todos los usuarios obtenida correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Usuarios obtenidos correctamente
                  users:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
        '404':
          description: No hay usuarios registrados
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: No hay usuarios registrados
                  users:
                    type: array
                    items: {}
        '401':
          description: No autorizado
        '403':
          description: Prohibido (rol insuficiente)
    post:
      summary: Crear un nuevo usuario
      description: Solo accesible para ADMIN o SUPERADMIN. Permite subir un archivo (ejemplo: foto de perfil) junto con los datos del usuario.
      tags:
        - Users
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: Archivo a subir (ejemplo: foto de perfil)
                nombre:
                  type: string
                email:
                  type: string
                password:
                  type: string
                # ...otros campos necesarios...
              required:
                - nombre
                - email
                - password
      responses:
        '201':
          description: Usuario creado exitosamente
        '400':
          description: Datos inválidos
        '401':
          description: No autorizado
        '403':
          description: Prohibido (rol insuficiente)
  /auth/login:
    post:
      summary: Iniciar sesión de usuario
      tags:
        - Authentication
      description: Permite a un usuario iniciar sesión proporcionando su correo electrónico, contraseña y un token de ReCAPTCHA. Si las credenciales son válidas, se devuelve un token de autenticación.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Inicio de sesión exitoso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Inicio de sesión exitoso para el usuario Juan. Hora de inicio de sesión: 10:30:00"
                  token:
                    type: string
                    nullable: true
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        '400':
          description: Error de validación de datos o reCAPTCHA inválido
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Validation Error / Error de Validación"
                  details:
                    oneOf:
                      - type: array
                        items:
                          type: object
                          properties:
                            message:
                              type: string
                              example: "El campo email es requerido"
                            field:
                              type: string
                              example: "email"
                            code:
                              type: string
                              example: "invalid_type"
                            received:
                              type: string
                              nullable: true
                            expected:
                              type: string
                              nullable: true
                      - type: object
                        properties:
                          field:
                            type: string
                            example: "recaptchaToken"
        '401':
          description: Credenciales incorrectas
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Correo electrónico o contraseña incorrectos"
                  details:
                    type: object
                    properties:
                      field:
                        type: string
                        example: "email"
        '500':
          description: Error interno del servidor o de base de datos
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error interno del servidor"
                  details:
                    type: string
                    nullable: true
                    example: null
  /users/active:
    get:
      summary: Obtiene todos los usuarios activos
      tags:
        - Users
      description: Retorna todos los usuarios con estado "activo".
      responses:
        '200':
          description: Lista de usuarios activos obtenida correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Usuarios activos obtenidos correctamente / Active users retrieved successfully
                  users:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
        '404':
          description: No hay usuarios activos registrados
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: No hay usuarios activos registrados
                  users:
                    type: array
                    items: {}
        '401':
          description: No autorizado
  /users/paginated:
    get:
      summary: Obtiene usuarios paginados
      tags:
        - Users
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Número de página
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          description: Cantidad de usuarios por página
      responses:
        '200':
          description: Lista paginada de usuarios
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Usuarios obtenidos correctamente / Users retrieved successfully
                  error:
                    type: string
                    nullable: true
                    example: null
                  users:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
                  currentPage:
                    type: integer
                    example: 1
                  totalPages:
                    type: integer
                    example: 5
                  totalUsers:
                    type: integer
                    example: 50
        '500':
          description: Error del servidor al recuperar los usuarios paginados
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    nullable: true
                    example: null
                  error:
                    type: string
                    example: Error al obtener los usuarios / Error retrieving users
                  users:
                    type: string
                    nullable: true
                    example: null
  /users/{id}:
    get:
      summary: Obtiene un usuario por ID, incluyendo sus servicios y solicitudes
      tags:
        - Users
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: ID del usuario a consultar
      responses:
        '200':
          description: Usuario encontrado correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Usuario obtenido correctamente / User retrieved successfully
                  error:
                    type: string
                    nullable: true
                  user:
                    $ref: '#/components/schemas/User'
        '404':
          description: Usuario no encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    nullable: true
                  error:
                    type: string
                    example: Usuario no encontrado / User not found
                  user:
                    type: string
                    nullable: true
        '500':
          description: Error del servidor al obtener el usuario
    put:
      summary: Actualiza un usuario
      tags:
        - Users
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: ID del usuario
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: Imagen de perfil del usuario (opcional)
                firstName:
                  type: string
                lastName:
                  type: string
                documentType:
                  type: string
                documentNumber:
                  type: string
                phone:
                  type: string
                email:
                  type: string
                password:
                  type: string
                  description: Si se envía, se actualizará la contraseña
                role:
                  type: string
                  description: Solo administradores pueden cambiar el rol
      responses:
        '200':
          description: Usuario actualizado correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Usuario actualizado correctamente por admin / User updated successfully by admin
                  error:
                    type: string
                    nullable: true
                    example: null
                  user:
                    $ref: '#/components/schemas/User'
        '400':
          description: Error de validación en los datos enviados
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    nullable: true
                    example: null
                  error:
                    type: string
                    example: Error de validación / Validation error
                  user:
                    type: string
                    nullable: true
                    example: null
        '404':
          description: Usuario no encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    nullable: true
                    example: null
                  error:
                    type: string
                    example: Usuario no encontrado / User not found
        '500':
          description: Error interno al actualizar el usuario
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    nullable: true
                    example: null
                  error:
                    type: string
                    example: Error al actualizar el usuario / Error updating user
  /services:
    get:
      summary: Obtiene todos los servicios, incluyendo el usuario creador
      tags: [Service]
      security:
        - bearerAuth: []
      description: Solo accesible para usuarios con rol ADMIN o SUPERADMIN.
      responses:
        '200':
          description: Servicios recuperados con éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Services retrieved successfully / Servicios recuperados con éxito
                  error:
                    type: string
                    nullable: true
                    example: null
                  services:
                    type: array
                    items:
                      $ref: '#/components/schemas/Service'
        '404':
          description: No se encontraron servicios
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    nullable: true
                    example: null
                  error:
                    type: string
                    example: No services found / No se encontraron servicios
                  services:
                    type: string
                    nullable: true
                    example: null
        '400':
          description: Error de validación en la consulta
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    nullable: true
                    example: null
                  error:
                    type: string
                    example: "Validation Error / Error de Validación ( ... )"
                  services:
                    type: string
                    nullable: true
                    example: null
        '500':
          description: Error interno o de base de datos al recuperar servicios
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    nullable: true
                    example: null
                  error:
                    type: string
                    example: Error retrieving services / Error al recuperar servicios ...
                  services:
                    type: string
                    nullable: true
                    example: null
    post:
      summary: Crea un nuevo servicio
      tags: [Service]
      security:
        - bearerAuth: []
      description: Solo accesible para usuarios con rol ADMIN o SUPERADMIN.
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - name
                - description
                - creatorId
                - area
                - status
              properties:
                file:
                  type: string
                  format: binary
                  description: Imagen del servicio (opcional)
                name:
                  type: string
                  example: "Taller de Yoga"
                description:
                  type: string
                  example: "Sesiones semanales de yoga para estudiantes"
                creatorId:
                  type: integer
                  example: 2
                area:
                  type: string
                  example: "Salud"
                status:
                  type: string
                  example: "activo"
      responses:
        '201':
          description: Servicio creado correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Service created successfully / Servicio creado con éxito
                  errors:
                    type: string
                    nullable: true
                    example: null
                  service:
                    $ref: '#/components/schemas/Service'
        '400':
          description: Error de validación en los datos enviados
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    nullable: true
                    example: null
                  error:
                    type: string
                    example: "Validation Error / Error de Validación ( ... )"
                  service:
                    type: string
                    nullable: true
                    example: null
        '500':
          description: Error interno al crear el servicio
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    nullable: true
                    example: null
                  error:
                    type: string
                    example: Error al crear el usuario / Error creating user ( ... )
                  service:
                    type: string
                    nullable: true
                    example: null
  /services/active:
    get:
      summary: Obtiene todos los servicios activos, incluyendo el usuario creador
      tags: [Service]
      description: Público, no requiere autenticación.
      responses:
        '200':
          description: Servicios activos recuperados con éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Active services retrieved successfully / Servicios activos recuperados con éxito
                  error:
                    type: string
                    nullable: true
                    example: null
                  services:
                    type: array
                    items:
                      $ref: '#/components/schemas/Service'
        '404':
          description: No se encontraron servicios activos
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    nullable: true
                    example: null
                  error:
                    type: string
                    example: No se encontraron servicios activos / No active services found
                  services:
                    type: string
                    nullable: true
                    example: null
        '400':
          description: Error de validación en la consulta
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    nullable: true
                    example: null
                  error:
                    type: string
                    example: Validation Error / Error de Validación...
                  services:
                    type: string
                    nullable: true
                    example: null
        '500':
          description: Error interno o de base de datos al recuperar servicios activos
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    nullable: true
                    example: null
                  error:
                    type: string
                    example: Error retrieving active services / Error al recuperar servicios activos
                  services:
                    type: string
                    nullable: true
                    example: null
  /services/{id}:
    get:
      summary: Obtiene un servicio por ID, incluyendo el usuario creador
      tags: [Service]
      security:
        - bearerAuth: []
      description: Solo accesible para usuarios con rol ADMIN, SUPERADMIN o INSTRUCTOR.
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: ID del servicio a consultar
      responses:
        '200':
          description: Servicio recuperado con éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Service retrieved successfully / Servicio recuperado con éxito
                  error:
                    type: string
                    nullable: true
                    example: null
                  service:
                    $ref: '#/components/schemas/Service'
        '404':
          description: Servicio no encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    nullable: true
                    example: null
                  error:
                    type: string
                    example: Service not found / Servicio no encontrado
                  service:
                    type: string
                    nullable: true
                    example: null
        '500':
          description: Error interno al recuperar el servicio
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    nullable: true
                    example: null
                  error:
                    type: string
                    example: Error retrieving service / Error al recuperar servicio (...)
                  service:
                    type: string
                    nullable: true
                    example: null
    put:
      summary: Actualiza un servicio existente
      tags: [Service]
      security:
        - bearerAuth: []
      description: Solo accesible para usuarios con rol ADMIN o SUPERADMIN.
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: ID del servicio a actualizar
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: Imagen del servicio (opcional)
                name:
                  type: string
                  example: "Taller de Yoga"
                description:
                  type: string
                  example: "Sesiones semanales de yoga para estudiantes"
                creatorId:
                  type: integer
                  example: 2
                area:
                  type: string
                  example: "Salud"
                status:
                  type: string
                  example: "activo"
      responses:
        '200':
          description: Servicio actualizado correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Service updated successfully / Servicio actualizado con éxito
                  error:
                    type: string
                    nullable: true
                    example: null
                  service:
                    $ref: '#/components/schemas/Service'
        '400':
          description: Error de validación en los datos enviados
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error de validación / Validation error
                  error:
                    type: array
                    items:
                      type: object
                    example: [{ path: ["name"], message: "Campo requerido" }]
                  service:
                    type: string
                    nullable: true
                    example: null
        '404':
          description: Servicio no encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    nullable: true
                    example: null
                  error:
                    type: string
                    example: Service not found / Servicio no encontrado
                  service:
                    type: string
                    nullable: true
                    example: null
        '500':
          description: Error interno al actualizar el servicio
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error al actualizar el usuario / Error updating user
                  error:
                    type: string
                    example: Error inesperado
                  service:
                    type: string
                    nullable: true
                    example: null
  /requests:
    get:
      summary: Obtiene todas las solicitudes, incluyendo el usuario solicitante y el servicio asociado
      tags: [Request]
      security:
        - bearerAuth: []
      description: Solo accesible para usuarios con rol ADMIN o SUPERADMIN.
      responses:
        '200':
          description: Solicitudes recuperadas con éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Requests retrieved successfully / Solicitudes recuperadas con éxito
                  error:
                    type: string
                    nullable: true
                    example: null
                  requests:
                    type: array
                    items:
                      $ref: '#/components/schemas/Request'
        '404':
          description: No se encontraron solicitudes
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: No se encontraron solicitudes
                  requests:
                    type: array
                    items: {}
                    example: []
        '400':
          description: Error de validación en la consulta
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error de validación / Validation error
                  error:
                    type: string
                    example: Validation Error / Error de Validación ( ... )
                  requests:
                    type: array
                    items: {}
                    example: []
        '500':
          description: Error interno o de base de datos al recuperar solicitudes
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error interno del servidor
                  error:
                    type: string
                    nullable: true
                    example: null
    post:
      summary: Crea una nueva solicitud
      tags: [Request]
      security:
        - bearerAuth: []
      description: Solo accesible para usuarios con rol ADMIN o SUPERADMIN.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - userId
                - serviceId
                - description
              properties:
                userId:
                  type: integer
                  example: 2
                serviceId:
                  type: integer
                  example: 3
                description:
                  type: string
                  example: Solicito asesoría psicológica
                status:
                  type: boolean
                  example: true
      responses:
        '201':
          description: Solicitud creada con éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Request created successfully / Solicitud creada con éxito
                  error:
                    type: string
                    nullable: true
                    example: null
                  request:
                    $ref: '#/components/schemas/Request'
        '400':
          description: Error de validación en los datos enviados
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error de validación / Validation error
                  error:
                    type: string
                    example: Validation Error / Error de Validación ( ... )
                  request:
                    type: string
                    nullable: true
                    example: null
        '500':
          description: Error interno al crear la solicitud
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error interno del servidor
                  error:
                    type: string
                    nullable: true
                    example: null
  /requests/active:
    get:
      summary: Obtiene todas las solicitudes activas, incluyendo el usuario solicitante y el servicio asociado
      tags: [Request]
      security:
        - bearerAuth: []
      description: Solo accesible para usuarios con rol ADMIN o SUPERADMIN.
      responses:
        '200':
          description: Solicitudes activas recuperadas con éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Active requests retrieved successfully / Solicitudes activas recuperadas con éxito
                  error:
                    type: string
                    nullable: true
                    example: null
                  requests:
                    type: array
                    items:
                      $ref: '#/components/schemas/Request'
        '404':
          description: No se encontraron solicitudes activas
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: No se encontraron solicitudes activas
                  requests:
                    type: array
                    items: {}
                    example: []
        '400':
          description: Error de validación en la consulta
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error de validación / Validation error
                  error:
                    type: string
                    example: Validation Error / Error de Validación ( ... )
                  requests:
                    type: array
                    items: {}
                    example: []
        '500':
          description: Error interno o de base de datos al recuperar solicitudes activas
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error interno del servidor
                  error:
                    type: string
                    nullable: true
                    example: null
  /requests/{id}:
    get:
      summary: Obtiene una solicitud por ID, incluyendo el usuario solicitante y el servicio asociado
      tags: [Request]
      security:
        - bearerAuth: []
      description: Solo accesible para usuarios con rol ADMIN o SUPERADMIN.
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: ID de la solicitud a consultar
      responses:
        '200':
          description: Solicitud recuperada con éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Request retrieved successfully / Solicitud recuperada con éxito
                  error:
                    type: string
                    nullable: true
                    example: null
                  request:
                    $ref: '#/components/schemas/Request'
        '404':
          description: Solicitud no encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Solicitud no encontrada
                  request:
                    type: string
                    nullable: true
                    example: null
        '500':
          description: Error interno al recuperar la solicitud
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error interno del servidor
                  error:
                    type: string
                    nullable: true
                    example: null
    put:
      summary: Actualiza una solicitud existente
      tags: [Request]
      security:
        - bearerAuth: []
      description: Solo accesible para usuarios con rol ADMIN o SUPERADMIN.
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: ID de la solicitud a actualizar
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - userId
                - serviceId
                - description
              properties:
                userId:
                  type: integer
                  example: 2
                serviceId:
                  type: integer
                  example: 3
                description:
                  type: string
                  example: Solicito asesoría psicológica
                status:
                  type: boolean
                  example: true
      responses:
        '200':
          description: Solicitud actualizada con éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Request updated successfully / Solicitud actualizada con éxito
                  error:
                    type: string
                    nullable: true
                    example: null
                  request:
                    $ref: '#/components/schemas/Request'
        '404':
          description: Solicitud no encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Solicitud no encontrada
                  request:
                    type: string
                    nullable: true
                    example: null
        '400':
          description: Error de validación en los datos enviados
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error de validación / Validation error
                  error:
                    type: string
                    example: Validation Error / Error de Validación ( ... )
                  request:
                    type: string
                    nullable: true
                    example: null
        '500':
          description: Error interno al actualizar la solicitud
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error interno del servidor
                  error:
                    type: string
                    nullable: true
                    example: null
  /services/user/{id}:
    get:
      summary: Obtiene todos los servicios creados por un usuario específico
      tags: [Service]
      security:
        - bearerAuth: []
      description: Solo accesible para usuarios con rol ADMIN o SUPERADMIN. Devuelve todos los servicios cuyo campo creatorId coincide con el id proporcionado.
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: ID del usuario creador de los servicios
      responses:
        '200':
          description: Servicios del usuario recuperados con éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  services:
                    type: array
                    items:
                      $ref: '#/components/schemas/Service'
        '404':
          description: No se encontraron servicios para este usuario
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  services:
                    type: array
                    items: {}
        '401':
          description: No autorizado
        '403':
          description: Prohibido (rol insuficiente)
        '500':
          description: Error interno del servidor
  /requests/user/{id}:
    get:
      summary: Obtiene todas las solicitudes realizadas por un usuario específico
      tags: [Request]
      security:
        - bearerAuth: []
      description: Devuelve todas las solicitudes cuyo campo userId coincide con el id proporcionado. Solo accesible para usuarios autenticados.
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: ID del usuario solicitante
      responses:
        '200':
          description: Solicitudes del usuario recuperadas con éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  details:
                    type: object
                    properties:
                      requests:
                        type: array
                        items:
                          $ref: '#/components/schemas/Request'
        '404':
          description: No se encontraron solicitudes para este usuario
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  details:
                    type: object
                    properties:
                      requests:
                        type: array
                        items: {}
        '401':
          description: No autorizado
        '500':
          description: Error interno del servidor
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    User:
      type: object
      required:
        - firstName
        - lastName
        - email
        - status
        - role
        - image
        - createdAt
        - updatedAt
      properties:
        id:
          type: integer
        firstName:
          type: string
        lastName:
          type: string
        documentType:
          type: string
        documentNumber:
          type: string
        phone:
          type: string
        email:
          type: string
        password:
          type: string
        status:
          type: string
        role:
          type: string
        image:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        services:
          type: array
          items:
            $ref: '#/components/schemas/Service'
        requests:
          type: array
          items:
            $ref: '#/components/schemas/Request'
      example:
        id: 1
        firstName: John
        lastName: Doe
        documentType: CC
        documentNumber: "123456789"
        phone: "3001234567"
        email: example@gmail.com
        password: "$2b$10$hash"
        status: activo
        role: user
        image: "https://example.com/image.jpg"
        createdAt: "2023-01-01T00:00:00Z"
        updatedAt: "2023-01-01T00:00:00Z"
        services: []
        requests: []
    LoginRequest:
      type: object
      required:
        - email
        - password
        - recaptchaToken
      properties:
        email:
          type: string
          format: email
          example: usuario@ejemplo.com
        password:
          type: string
          example: contraseña123
        recaptchaToken:
          type: string
          example: "recaptcha-token-ejemplo"
    Service:
      type: object
      required:
        - name
        - description
        - creatorId
        - area
        - status
      properties:
        id:
          type: integer
          description: Unique identifier for the service
          example: 1
        name:
          type: string
          description: Name of the service
          example: "Taller de Yoga"
        description:
          type: string
          description: Description of the service
          example: "Sesiones semanales de yoga para estudiantes"
        creatorId:
          type: integer
          description: ID of the user who created the service
          example: 2
        area:
          type: string
          enum:
            - Salud
            - Arte y Cultura
            - Deporte y Recreación
            - Apoyo Socioeconomico y Reconocimiento a la Excelencia
            - Apoyo Psicosocial
          description: Area to which the service belongs
          example: "Salud"
        image:
          type: string
          description: URL or path to the service image
          example: "/uploads/services/yoga.png"
        status:
          type: string
          enum:
            - activo
            - inactivo
          description: Current status of the service
          example: "activo"
        createdAt:
          type: string
          format: date-time
          description: Date and time when the service was created
          example: "2024-06-01T12:00:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Date and time when the service was last updated
          example: "2024-06-02T15:30:00Z"
    Request:
      type: object
      properties:
        id:
          type: integer
          example: 1
        userId:
          type: integer
          description: ID del usuario solicitante
          example: 2
        serviceId:
          type: integer
          description: ID del servicio solicitado
          example: 3
        createdBy:
          type: integer
          description: ID del usuario que creó la solicitud
          example: 1
        description:
          type: string
          description: Descripción de la solicitud
          example: Solicito asesoría psicológica
        status:
          type: boolean
          description: Estado de la solicitud (activa/inactiva)
          example: true
        createdAt:
          type: string
          format: date-time
          example: "2024-06-01T12:00:00.000Z"
        updatedAt:
          type: string
          format: date-time
          example: "2024-06-01T12:00:00.000Z"
        applicant:
          $ref: '#/components/schemas/User'
        service:
          $ref: '#/components/schemas/Service'
        creator:
          $ref: '#/components/schemas/User'